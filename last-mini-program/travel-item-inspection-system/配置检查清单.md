# 小程序后端连接配置检查清单

## ✅ 必须完成的配置

### 1. 后端服务启动
```bash
cd Check
mvn spring-boot:run
```
- [ ] 后端服务成功启动
- [ ] 可以看到类似 "Tomcat started on port(s): 8080" 的日志
- [ ] 浏览器访问 http://localhost:8080/doc.html 可以看到API文档

### 2. 数据库配置
- [ ] MySQL 服务已启动
- [ ] 已创建数据库 `check`
- [ ] 已执行初始化脚本 `sql/init_database.sql`
- [ ] `Check/src/main/resources/application.yml` 中数据库配置正确

### 3. 微信开发者工具配置
- [ ] 已打开微信开发者工具
- [ ] 点击右上角 **详情** 按钮
- [ ] 在 **本地设置** 选项卡中
- [ ] ✅ 勾选 **不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书**

### 4. API 地址配置
- [ ] 打开 `出行必带小程序/utils/api.js`
- [ ] 确认 `BASE_URL` 为：`const BASE_URL = 'http://localhost:8080';`

### 5. 测试连接
在小程序中：
- [ ] 尝试登录
- [ ] 查看控制台是否有网络请求
- [ ] 检查请求URL是否正确
- [ ] 检查响应数据是否正确

## 🔍 调试步骤

### 如果还是报错 "url not in domain list"

1. **确认开发者工具设置**
   - 完全关闭微信开发者工具
   - 重新打开项目
   - 再次确认"不校验合法域名"已勾选
   - 点击 **编译** 按钮重新编译

2. **检查后端服务**
   ```bash
   # 测试后端是否可访问
   curl http://localhost:8080/api/users/page?pageNum=1&pageSize=10
   ```
   如果返回数据，说明后端正常

3. **检查小程序代码**
   - 确认 `utils/api.js` 中的 BASE_URL 没有拼写错误
   - 确认没有其他地方的网络请求配置

4. **查看详细错误**
   - 在开发者工具的 **调试器** -> **Console** 查看详细错误
   - 在 **调试器** -> **Network** 查看网络请求详情

## 📝 测试账号

如果数据库中已有测试用户：
- 用户名：`testuser`
- 密码：`123456`

如果没有，可以先注册一个用户。

